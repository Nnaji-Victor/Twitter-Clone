{"ast":null,"code":"import _regeneratorRuntime from\"/home/tanisk/twitter/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tanisk/twitter/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tanisk/twitter/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/tanisk/twitter/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\nbody {\\n  background-color: \",\";\\n  color: \",\";\\n}\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect,useContext,Fragment}from'react';import'../Css/NewsFeed.css';import WhoToFollow from'./WhoToFollow';import CreatePost from'./CreatePost';import Tweets from'./Tweets';// import SideBar from './SideBar'\nimport axios from'axios';import{token}from'../Config/Token';import shortid from'shortid';import Loading from'../Extra/Loading';import{Link}from'react-router-dom';import ProfileBar from'./ProfileBar';import AuthContext from'../Context/Authorization/authContext';import authContext from'../Context/Authorization/authContext';import{ThemeProvider,createGlobalStyle}from'styled-components';import storage from'local-storage-fallback';import'../Css/DarkMode.css';var GlobalStyle=createGlobalStyle(_templateObject(),function(props){return props.theme.mode==='dark'?'#15202B ':'white';},function(props){return props.theme.mode==='dark'?'white':'#15202B';});var getInitalTheme=function getInitalTheme(){var savedTheme=storage.getItem('theme');return savedTheme?JSON.parse(savedTheme):{mode:'light'};};// Function Newsfeed Starts here \nfunction NewsFeed(){var authContext=useContext(AuthContext);var logout=authContext.logout,user=authContext.user;var Okaylogout=function Okaylogout(){logout();};// Dark Mode logic\nvar _useState=useState(getInitalTheme),_useState2=_slicedToArray(_useState,2),theme=_useState2[0],settheme=_useState2[1];var DarkClick=function DarkClick(){settheme(theme.mode=='dark'?{mode:'light'}:{mode:'dark'});};useEffect(function(){storage.setItem('theme',JSON.stringify(theme));},[theme]);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),feeds=_useState4[0],setfeeds=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];var proxyurl=\"https://cors-anywhere.herokuapp.com/\";var url=\"https://api.twitter.com/1.1/search/tweets.json?q=%23\".concat(query?query:'NewProfilePic',\" exclude:replies exclude:retweets&count=200&result_type=recent\");useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(proxyurl+url,{headers:{'Authorization':\"Bearer \".concat(token)}});case 2:res=_context.sent;setfeeds(res.data.statuses);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[url]);var filterFeed=feeds.filter(function(feed){if(!feed.text.startsWith('RT')){return feed;}});return/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(GlobalStyle,null),/*#__PURE__*/React.createElement(\"section\",{className:\"feeds_page\"},/*#__PURE__*/React.createElement(\"nav\",{className:\"feeds-nav shadow-md\"},/*#__PURE__*/React.createElement(\"div\",{class:\"icons\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"active\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-home\"}),\" Home \"),/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"text-dark\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-hashtag\"}),\" Explore \"),/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"text-dark\"},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-bell\"}),\" Notifications \"),/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"text-dark\"},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-envelope\"}),\" Messages \")),/*#__PURE__*/React.createElement(\"div\",{className:\"search-bar\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-search\"}),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setQuery(e.target.value);},type:\"text\",placeholder:\"search twitter\",className:\"search-bar-input\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"user dropdown\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-img-wrapper\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:\"https://www.vippng.com/png/detail/202-2026524_person-icon-default-user-icon-png.png\"})),/*#__PURE__*/React.createElement(Link,{to:\"/feed\",\"data-toggle\":\"dropdown\",className:\"user-link dropdown-toggle\"},user&&user.name.split(' ').slice(0,-1).join(' ')),/*#__PURE__*/React.createElement(\"ul\",{className:\"dropdown-menu \",role:\"menu\",\"aria-labelledby\":\"menu1\"},/*#__PURE__*/React.createElement(\"a\",{onClick:Okaylogout,style:{backgroundColor:'#41A7F0',color:'white',marginBottom:'10px'},class:\"btn\"},\"Logout\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"feeds-content\"},/*#__PURE__*/React.createElement(CreatePost,null),/*#__PURE__*/React.createElement(\"div\",{className:\"posts\"},filterFeed.length===0?/*#__PURE__*/React.createElement(Loading,null):filterFeed.map(function(feed){return/*#__PURE__*/React.createElement(Tweets,{key:shortid.generate(),feed:feed});})),/*#__PURE__*/React.createElement(WhoToFollow,null))));}export default NewsFeed;","map":{"version":3,"sources":["/home/tanisk/twitter/client/src/Component/News-Feed/NewsFeed.js"],"names":["React","useState","useEffect","useContext","Fragment","WhoToFollow","CreatePost","Tweets","axios","token","shortid","Loading","Link","ProfileBar","AuthContext","authContext","ThemeProvider","createGlobalStyle","storage","GlobalStyle","props","theme","mode","getInitalTheme","savedTheme","getItem","JSON","parse","NewsFeed","logout","user","Okaylogout","settheme","DarkClick","setItem","stringify","feeds","setfeeds","query","setQuery","proxyurl","url","getData","get","headers","res","data","statuses","filterFeed","filter","feed","text","startsWith","e","target","value","name","split","slice","join","backgroundColor","color","marginBottom","length","map","generate"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, Fragment } from 'react'\nimport '../Css/NewsFeed.css'\nimport WhoToFollow from './WhoToFollow'\nimport CreatePost from './CreatePost'\nimport Tweets from './Tweets'\n// import SideBar from './SideBar'\nimport axios from 'axios'\nimport { token } from '../Config/Token'\nimport shortid from 'shortid'\nimport Loading from '../Extra/Loading'\nimport { Link } from 'react-router-dom'\nimport ProfileBar from './ProfileBar'\nimport AuthContext from '../Context/Authorization/authContext'\nimport authContext from '../Context/Authorization/authContext'\n\nimport { ThemeProvider, createGlobalStyle } from 'styled-components'\nimport storage from 'local-storage-fallback'\nimport '../Css/DarkMode.css'\n\nconst GlobalStyle = createGlobalStyle`\nbody {\n  background-color: ${props => props.theme.mode === 'dark' ? '#15202B ' : 'white'};\n  color: ${props => props.theme.mode === 'dark' ? 'white' : '#15202B'};\n}`;\n\nconst getInitalTheme = () => {\n    const savedTheme = storage.getItem('theme')\n    return savedTheme ? JSON.parse(savedTheme) : { mode: 'light' }\n}\n\n\n// Function Newsfeed Starts here \n\nfunction NewsFeed() {\n    const authContext = useContext(AuthContext)\n    const { logout, user } = authContext\n\n    const Okaylogout = () => {\n        logout();\n    }\n\n    // Dark Mode logic\n    const [theme, settheme] = useState(getInitalTheme)\n\n    const DarkClick = () => {\n        settheme(theme.mode == 'dark' ? { mode: 'light' } : { mode: 'dark' })\n    }\n\n    useEffect(() => {\n        storage.setItem('theme', JSON.stringify(theme))\n    }, [theme])\n\n\n    const [feeds, setfeeds] = useState([])\n    const [query, setQuery] = useState('')\n\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    const url = `https://api.twitter.com/1.1/search/tweets.json?q=%23${query ? query : 'NewProfilePic'} exclude:replies exclude:retweets&count=200&result_type=recent`\n\n    useEffect(() => {\n        const getData = async () => {\n            const res = await axios.get(proxyurl + url, {\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            })\n            setfeeds(res.data.statuses)\n        };\n        getData()\n    }, [url])\n\n\n    const filterFeed = feeds.filter(feed => {\n        if (!feed.text.startsWith('RT')) {\n            return feed\n        }\n    })\n\n\n    return (\n        <ThemeProvider theme={theme}>\n            <GlobalStyle />\n            <section className=\"feeds_page\">\n                {/* Navbar Starts here  */}\n\n\n                <nav className=\"feeds-nav shadow-md\">\n                    <div class=\"icons\">\n                        <Link to=\"/\" className=\"active\"><i className=\"fas fa-home\"></i> Home </Link>\n                        <Link to=\"/\" className=\"text-dark\" ><i className=\"fas fa-hashtag\"></i> Explore </Link>\n                        <Link to=\"/\" className=\"text-dark\" ><i className=\"far fa-bell\"></i> Notifications </Link>\n                        <Link to=\"/\" className=\"text-dark\"><i className=\"far fa-envelope\"></i> Messages </Link>\n                    </div>\n\n                    <div className=\"search-bar\">\n                        <i className=\"fas fa-search\"></i>\n                        <input onChange={e => setQuery(e.target.value)} type=\"text\" placeholder=\"search twitter\" className=\"search-bar-input\"></input>\n                    </div>\n\n\n\n                    <div className=\"user dropdown\"  >\n                        <div className=\"user-img-wrapper\">\n                            {/* <i class=\"fas fa-user\"></i> */}\n                            <img alt=\"\" src=\"https://www.vippng.com/png/detail/202-2026524_person-icon-default-user-icon-png.png\" />\n                        </div>\n                        <Link to='/feed' data-toggle=\"dropdown\" className=\"user-link dropdown-toggle\" >{user && user.name.split(' ').slice(0, -1).join(' ')}</Link>\n\n                        {/* \n                    <Link to=\"#!\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n                        <i className=\"fas fa-chevron-down \"></i>\n                    </Link> */}\n\n                        <ul className=\"dropdown-menu \" role=\"menu\" aria-labelledby=\"menu1\">\n\n                            <a onClick={Okaylogout}\n                                style={{ backgroundColor: '#41A7F0', color: 'white', marginBottom: '10px' }} class=\"btn\">Logout</a>\n\n                            {/* <li > <label class=\"switch\">\n                                <input onClick={DarkClick} type=\"checkbox\" />\n                                <span class=\"slider round\"></span>\n                            </label>\n                            </li> */}\n\n\n                        </ul>\n\n\n                    </div>\n                </nav>\n\n                {/* Navbar ends here */}\n                <div className=\"feeds-content\">\n                    <CreatePost />\n                    <div className=\"posts\">\n                        {filterFeed.length === 0 ? <Loading /> : filterFeed.map(feed => <Tweets key={shortid.generate()} feed={feed} />)}\n                    </div>\n                    <WhoToFollow />\n                </div>\n\n            </section >\n        </ThemeProvider>\n    )\n}\n\nexport default NewsFeed\n"]},"metadata":{},"sourceType":"module"}